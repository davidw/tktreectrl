<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<!-- $Id: What's\040New\040in\040TkTreeCtrl.html,v 1.8 2005/07/12 02:51:38 treectrl Exp $ -->


  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">


  
  
  
  
  <title>What's New in TkTreeCtrl</title>
  <meta content="Tim Baker" name="author">
</head>


<body>


<h1>What's New in TkTreeCtrl 2.1</h1>

This version should be backwards compatible with 2.0, except for a few obscure changes.<br>

<h2>TreeCtrl Configuration Options</h2>



  
    
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>


    </tr>


    <tr>


      <td>-itemwidth</td>


      <td><br>

      </td>

    </tr>

    <tr>

      <td>-itemwidthequal</td>

      <td>Deprecates the column -widthhack option.</td>

    </tr>

    <tr>

      <td>-itemwidthmultiple</td>

      <td>Deprecates the column -stepwidth option.</td>

    </tr>

  
  </tbody>
</table>

<h2>Column Configuration Options</h2>



  
    
      
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>

      <th style="background-color: rgb(255, 255, 204); width: 50%;">Deprecated</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>

    </tr>

    <tr>

      <td>-stepwidth</td>

      <td>treectrl's -itemwidthmultiple option</td>

    </tr>

    <tr>

      <td>-widthhack</td>

      <td>treectrl's -itemwidthequal option</td>

    </tr>

  
  </tbody>
</table>

<h2>Item Configuration Options</h2>



  
    
      

  
    
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">
  <tbody>
    <tr>

      <th style="background-color: rgb(255, 255, 204); width: 50%;">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>

    </tr>

    <tr>

      <td>-height</td>

      <td>Overrides the treectrl's -itemheight option</td>
    </tr>
  </tbody>
</table>
<h2>Item Command</h2>



  
    
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>


    
    <tr>

      <th style="background-color: rgb(255, 255, 204);">Deprecated</th>

      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>

    </tr>

    <tr>

      <td>item element actual</td>

      <td>item element perstate</td>

    </tr>

    <tr>

      <td>item complex</td>

      <td>item element configure</td>

    </tr>

    <tr>

      <th style="background-color: rgb(255, 255, 204);">Behaviour Changed</th>

      <th style="background-color: rgb(204, 255, 255);">What changed</th>

    </tr>

    <tr>

      <td>item bbox</td>

      <td>No longer returns an error if no style had been assigned to the column.</td>

    </tr>

    <tr>

      <td>item state forcolumn</td>

      <td>No longer returns an error if no style had been assigned to the column.</td>

    </tr>

    <tr>

      <td>item style set</td>

      <td>Does nothing when replacing a style with the same style.
Previously the old style was freed before assigning the new style,
losing the element config info.<br>

      <span style="color: rgb(255, 0, 0);">Potential incompatibility</span></td>

    </tr>

    <tr>

      <th style="background-color: rgb(255, 255, 204); width: 50%;">Arguments/Result
Changed</th>

      <th style="background-color: rgb(204, 255, 255);">What changed</th>

    </tr>

    <tr>

      <td>item create</td>

      <td>Added options: -count -height, -nextsibling, -open, -parent,
-prevsibling, and -returnid. Multiple items may be created with one
call using the -count option.</td>

    </tr>

    <tr>

      <td>item element configure</td>

      <td>Multiple elements in multiple columns may be configured with
a single call. Use '+' to separate elements, and ',' to separate
columns. See the docs.</td>

    </tr>

    <tr>

      <td>item style set</td>

      <td>When no column is specified, returns a list of one style name
per column. Previously, the list would have less values than the number
of columns if no styles had ever been assigned to the rightmost
column(s).<br>

      <span style="color: rgb(255, 0, 0);">Potential incompatibility</span></td>

    </tr>

    <tr>

      <td>item text</td>

      <td>When no column is specified, returns a list of one string per column.</td>

    </tr>

    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>


    </tr>


    <tr>

      <td>item image</td>

      <td>Partner to the [item text] command.</td>

    </tr>

    <tr>

      <td>item element perstate</td>

      <td>Not really new, just renamed from [item element actual] to
better describe what it does. Accepts a new optional argument which
specifies the state to use when determining the value of the per-state
option.<br>
      <br>
The following options no longer return a default value if the per-state option itself does not have a value specified:<br>
      <ul>
        <li>bitmap -foreground, -background</li>
        <li>border -relief</li>
        <li>text -fill, -font</li>
      </ul>

      <span style="color: rgb(255, 0, 0);">Potential incompatibility</span></td>

    </tr>

    <tr>


      <td>item span</td>


      <td>A style may now be displayed over multiple adjacent columns.<br>

      </td>

    </tr>

  
  </tbody>
</table>

<h2><span style="font-weight: bold;"></span>Notify Command</h2>



  
    
<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>


    </tr>


    <tr>


      <td>notify unbind<br>


      </td>


      <td>Let's you unbind all scripts from an object with one call.</td>

    </tr>

  
  </tbody>
</table>

<h2>Style Layout Changes</h2>

<ul>

  <li>Column justification will now affect the position of elements in 2 situations which previously had no effect (<span style="color: rgb(255, 0, 0);">Potential incompatibility</span>):</li>

</ul>

<ol style="margin-left: 40px;">

  <li>If a -detach element had a fixed width larger than the other elements.</li>

  <li>If an element had -iexpand x specified as well as -maxwidth, leaving some space available.</li>

</ol>

<h2>Element Changes</h2>


<ul>

  <li>Bitmap, image and text elements are drawn clipped if given less space than they need.</li>

  <li>Fixed line wrapping of text elements. It did not work for single lines of text at all (<span style="color: rgb(255, 0, 0);">Potential incompatibility</span>).</li>

</ul>

<h2>Event Changes</h2>


<ul>

  <li>The new static event <span style="font-weight: bold;">&lt;ItemVisibility&gt;</span> is generated when items become visible on screen and when items are no longer visible on screen.
This event allows you to create really big lists by only assigning
styles when items are about to be displayed. See the EVENTS AND SCRIPT
SUBSTITUTIONS section in the help
file, and the new demo "Big List".</li>

</ul>

<h2>Other Changes</h2>


<ul>

  <li>On WinXP, the column header sort arrow is drawn like Explorer draws it if <span style="font-weight: bold;">-usetheme</span>
is true.</li>

</ul>

<h2>Demo Changes</h2>


<ul>

  <li>New demo "Big List". Demonstrates the new <span style="font-weight: bold;">&lt;ItemVisibility&gt;</span> event, using &lt;Expand-before&gt; to add items on demand, and column spanning.</li>

  <li>The context menu has a <span style="font-weight: bold;">Span</span> submenu that lets you maninpulate column spanning in items. See the&nbsp;<span style="font-weight: bold;">item span</span> command in the help file.</li>

  <li>Under WinXP, the "Explorer" demos will use the new <span style="font-weight: bold;">shellicon</span>
extension if available. This extension allows a treectrl to display
file/folder icons using the Win32 Shell API. It may work on other
versions of Windows but it hasn't been tested.</li>

</ul>

<hr style="width: 100%; height: 2px;">
<h1>What's New in TkTreeCtrl 2.0</h1>


<h2>TreeCtrl Configuration Options</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">Replaced</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>


    </tr>


    <tr>


      <td>-openbuttonimage</td>


      <td>-buttonimage</td>


    </tr>


    <tr>


      <td>-closedbuttonimage</td>


      <td>-buttonimage</td>


    </tr>


    <tr>


      <td>-openbuttonbitmap</td>


      <td>-buttonbitmap</td>


    </tr>


    <tr>


      <td>-closedbuttonbitmap</td>


      <td>-buttonbitmap</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">Usage
Changed</th>


      <th style="background-color: rgb(204, 255, 255);">How it changed</th>


    </tr>


    <tr>


      <td>-backgroundmode</td>


      <td>The values "index" and "visindex" are deprecated. The value
"order" should be used instead of "index", and
"ordervisible" should be used instead of "visindex". This brings
agreement with the new "item order" command which replaces the "item
index" command.</td>


    </tr>


    <tr>


      <td>-treecolumn</td>


      <td>This used to be any integer value which may or may not have
corresponded to an actual column. Now the value must be a valid column
description, or an empty string to indicate no column should display
buttons/lines.</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">New</th>


      <td></td>


    </tr>


    <tr>


      <td>-backgroundimage</td>


      <td></td>


    </tr>


    <tr>


      <td>-columnprefix</td>


      <td></td>


    </tr>


    <tr>


      <td>-columnresizemode</td>


      <td></td>


    </tr>


    <tr>


      <td>-itemprefix</td>


      <td></td>


    </tr>


    <tr>


      <td>-minitemheight</td>


      <td></td>


    </tr>


    <tr>


      <td>-usetheme</td>


      <td></td>


    </tr>


  
  
  </tbody>
</table>


<h2>TreeCtrl Commands</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="width: 50%; background-color: rgb(255, 255, 204);">Deprecated</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>


    </tr>


    <tr>


      <td>compare</td>


      <td>item compare</td>


    </tr>


    <tr>


      <td>index</td>


      <td>item id</td>


    </tr>


    <tr>


      <td>numcolumns</td>


      <td>column count</td>


    </tr>


    <tr>


      <td>numitems</td>


      <td>item count</td>


    </tr>


    <tr>


      <td>range</td>


      <td>item range</td>


    </tr>


  
  
  </tbody>
</table>


<h2>Column Configuration Options</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">Removed</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>


    </tr>


    <tr>


      <td>-relief<br>


      </td>


      <td>-state</td>


    </tr>


    <tr>


      <td>-sunken</td>


      <td>-state</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">Renamed<br>


      </th>


      <th style="background-color: rgb(204, 255, 255);">New name</th>


    </tr>


    <tr>


      <td>-arrowpad</td>


      <td>-arrowpadx</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">Usage Changed</th>


      <th style="background-color: rgb(204, 255, 255);">How it changed</th>


    </tr>


    <tr>


      <td>-background</td>


      <td>This is now a per-state option. See COLUMNS in the help file
for valid state names.</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">New<br>


      </th>


      <td></td>


    </tr>


    <tr>


      <td>-arrowbitmap<br>


      </td>


      <td></td>


    </tr>


    <tr>


      <td>-arrowimage</td>


      <td></td>


    </tr>


    <tr>


      <td>-arrowpady</td>


      <td></td>


    </tr>


    <tr>


      <td>-maxwidth</td>


      <td></td>


    </tr>


    <tr>


      <td>-resize</td>


      <td></td>


    </tr>


    <tr>


      <td>-state</td>


      <td></td>


    </tr>


    <tr>


      <td>-textlines</td>


      <td></td>


    </tr>


  
  
  </tbody>
</table>


<h2>Column Command</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">Deprecated</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>


    </tr>


    <tr>


      <td>column index</td>


      <td>column id</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">Arguments/Result
Changed</th>


      <th style="background-color: rgb(204, 255, 255);">What changed</th>


    </tr>


    <tr>


      <td>column configure<br>


      </td>


      <td>A column description of "all" is allowed if at least one
option-value pair is given.<br>


      </td>


    </tr>


    <tr>


      <td>column create</td>


      <td>The result is a unique identifier. Previously the result was
an
index in the list of columns.</td>


    </tr>


    <tr>


      <td>column delete</td>


      <td>A column description of "all" is allowed.</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>


    </tr>


    <tr>


      <td>column compare</td>


      <td></td>


    </tr>


    <tr>


      <td>column count</td>


      <td>replaces "numcolumns"</td>


    </tr>


    <tr>


      <td>column dragconfigure</td>


      <td></td>


    </tr>


    <tr>


      <td>column dragcget</td>


      <td></td>


    </tr>


    <tr>


      <td>column id</td>


      <td>replaces "column index"</td>


    </tr>


    <tr>


      <td>column list</td>


      <td></td>


    </tr>


    <tr>


      <td>column order</td>


      <td></td>


    </tr>


  
  
  </tbody>
</table>


<h2>Item Command</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">Removed</th>


      <th style="background-color: rgb(204, 255, 255);">What to use
instead</th>


    </tr>


    <tr>


      <td>item index</td>


      <td>item order</td>


    </tr>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">New</th>


      <th style="background-color: rgb(204, 255, 255);">Comment</th>


    </tr>


    <tr>


      <td>item compare</td>


      <td>replaces "compare"</td>


    </tr>


    <tr>


      <td>item count</td>


      <td>replaces "numitems"</td>


    </tr>


    <tr>


      <td>item id</td>


      <td>replaces "index"</td>


    </tr>


    <tr>


      <td>item order</td>


      <td>replaces "item index"</td>


    </tr>


    <tr>


      <td>item range</td>


      <td>replaces "range"</td>


    </tr>


  
  
  </tbody>
</table>


<h2>Notify Command</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204); width: 50%;">Arguments/Result
Changed</th>


      <th style="background-color: rgb(204, 255, 255);">What changed</th>


    </tr>


    <tr>


      <td>notify generate<br>


      </td>


      <td>Added optional <span style="font-style: italic;">percentsCommand</span>
argument</td>


    </tr>


    <tr>


      <td>notify install</td>


      <td>Old syntax (supported but deprecated):<br>


      
      
      <pre style="margin-left: 40px;"><span style="font-weight: bold;">notify install event</span> <span style="font-style: italic;">eventName</span></pre>


      
      
      <pre style="margin-left: 40px;"><span style="font-weight: bold;">notify install detail</span> <span style="font-style: italic;">eventName</span> <span style="font-style: italic;">detail</span></pre>


New syntax:<br>


      
      
      <pre style="margin-left: 40px;"><span style="font-weight: bold;">notify install</span> &lt;<span style="font-style: italic;">eventName</span>&gt;</pre>


      
      
      <pre style="margin-left: 40px;"><span style="font-weight: bold;">notify install</span> &lt;<span style="font-style: italic;">eventName</span>-<span style="font-style: italic;">detail</span>&gt;</pre>


      </td>


    </tr>


    <tr>


      <td>notify linkage</td>


      <td>Old syntax (supported but deprecated):<br>


      
      
      <div style="margin-left: 40px;">
      
      
      <pre><span style="font-weight: bold;">notify linkage</span> <span style="font-style: italic;">eventName</span></pre>


      
      
      <pre><span style="font-weight: bold;">notify linkage</span> <span style="font-style: italic;">eventName</span> <span style="font-style: italic;">detail</span></pre>


      </div>


New syntax:<br>


      
      
      <div style="margin-left: 40px;">
      
      
      <pre><span style="font-weight: bold;">notify linkage</span> &lt;<span style="font-style: italic;">eventName</span>&gt;</pre>


      
      
      <pre><span style="font-weight: bold;">notify linkage</span> &lt;<span style="font-style: italic;">eventName</span>-<span style="font-style: italic;">detail</span>&gt;</pre>


      </div>


      </td>


    </tr>


    <tr>


      <td>notify uninstall</td>


      <td>see <span style="font-weight: bold;">notify install</span>
above</td>


    </tr>


  
  
  </tbody>
</table>


<h2>Style Layout Options</h2>


<table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2">


  <tbody>


    <tr>


      <th style="background-color: rgb(255, 255, 204);">Usage Changed</th>


      <th style="background-color: rgb(204, 255, 255);">How it changed</th>


    </tr>


    <tr>


      <td>-iexpand</td>


      <td>Two new flags "x' and "y" are allowed. Previously, only the
-ipadx and -ipady padding could be expanded by this option. The new xy
flags expand the display area of the element, not the padding. To
update your code, you will probably want to change this:<br>


      
      
      <div style="margin-left: 40px;">
      
      
      <pre>$T style layout $S $E -iexpand we</pre>


      </div>


to this:<br>


      
      
      <div style="margin-left: 40px;">
      
      
      <pre>$T style layout $S $E -iexpand x<br></pre>


      </div>


Keep in mind that -union elements are not affected by -iexpand xy,
since the size of a -union element is determined by the elements it
surrounds.</td>


    </tr>


    <tr>


      <th style="width: 50%; background-color: rgb(255, 255, 204);">New<br>


      </th>


      <td></td>


    </tr>


    <tr>


      <td>-height</td>


      <td></td>


    </tr>


    <tr>


      <td>-maxheight</td>


      <td></td>


    </tr>


    <tr>


      <td>-maxwidth</td>


      <td></td>


    </tr>


    <tr>


      <td>-minheight</td>


      <td></td>


    </tr>


    <tr>


      <td>-minwidth</td>


      <td></td>


    </tr>


    <tr>


      <td>-sticky</td>


      <td></td>


    </tr>


    <tr>


      <td>-width</td>


      <td></td>


    </tr>


  
  
  </tbody>
</table>


<h2>Element Changes</h2>


<ul>


  <li>A new element type&nbsp;<span style="font-weight: bold;">window</span>
was added.
See the new demo "Firefox Privacy" and the ELEMENTS section in the help
file.</li>


  <li>All element types have a new
per-state boolean option called <span style="font-weight: bold;">-draw</span>.</li>


  <li>The <span style="font-weight: bold;">text</span> element type
has a new option called <span style="font-weight: bold;">-textvariable</span>.
See the new demo
"Textvariable" and the ELEMENTS section in the help file.</li>


</ul>


<h2>Event Changes</h2>


<ul>


  <li>2 new %-substitution characters <span style="font-weight: bold;">%P</span>
and <span style="font-weight: bold;">%?</span> are allowed in binding
scripts. See the EVENTS AND SCRIPT SUBSTITUTIONS section in the help
file.</li>


  <li>The new static event <span style="font-weight: bold;">&lt;ItemDelete&gt;</span>
is generated when items are deleted. See the EVENTS AND SCRIPT
SUBSTITUTIONS section in the help file.</li>


</ul>


<h2>Library Script Changes</h2>


<h3 style="margin-left: 40px;">filelist-bindings.tcl:</h3>


<ul>


  <li>The Priv(edit) variable, which is used to specify which text
elements may be edited, now has the same format as Priv(sensitive).
Previously only elements in the first column could be edited.</li>


  <li>3 new commands in the TreeCtrl namespace should be used to access
the Priv(dragimage), Priv(edit) and Priv(sensitive) variables. The
commands are SetDragImage, SetEditable and SetSensitive.</li>


  <li>Two new dynamic events <span style="font-weight: bold;">&lt;Edit-begin&gt;</span>
and <span style="font-weight: bold;">&lt;Edit-end&gt;</span> are
generated when editing a file name.</li>


</ul>


<h3 style="margin-left: 40px;">treectrl.tcl:</h3>


<ul>


  <li>On OSX/Aqua, the Command key is used to perform discontinuous
selection. Previously the Control key was used but Command is specified
by Apple's user-interface guidelines.</li>


</ul>


<h2>Other Changes</h2>


<ul>


  <li>On WinXP, the column headers and open/close buttons are drawn
using the system theme if <span style="font-weight: bold;">-usetheme</span>
is true. The sort arrow is drawn the old-fashioned way.</li>


  <li>On OSX/Aqua,&nbsp; the column headers and open/close buttons are
drawn
using the system theme if <span style="font-weight: bold;">-usetheme</span>
is true. The sort arrow will be drawn by the Appearance Manager as
well. This will override the <span style="font-weight: bold;">-arrowside</span>
and <span style="font-weight: bold;">-arrowgravity</span> options.</li>


  <li>Columns can be moved by drag-and-drop. See <span style="font-weight: bold;">column dragconfigure</span> in the help
file.</li>


  <li>Columns can be specified in new ways. See the COLUMN DESCRIPTION
section in the help file.</li>


  <li>Added new section DYNAMIC EVENTS to the help file.</li>


  <li>Added new section PER-STATE OPTIONS to the help file.</li>


  <li>The new style layout option <span style="font-weight: bold;">-indent</span>
allows elements to be displayed in the button/line area. See the <span style="font-weight: bold;">style layout</span> command in the help
file and the new demo "Firefox Privacy".</li>


  <li>The new item description <span style="font-weight: bold;">end</span>
is equivalent to <span style="font-weight: bold;">last</span>.</li>


  <li><span style="color: rgb(255, 0, 0);">If you have version 1.1
installed, replace the old pkgIndex.tcl file with the one from this
version (but replace the version number 2.0 with 1.1).<span style="color: rgb(0, 0, 0);"> Otherwise the old pkgIndex.tcl file will
set the TREECTRL_LIBRARY variable which will override where the library
scripts are found.</span></span></li>


</ul>


<h2>Demo Changes</h2>


<ul>


  <li>New demo "Firefox Privacy". Demonstrates the new <span style="font-weight: bold;">window</span> element type and <span style="font-weight: bold;">-indent</span> style layout option.</li>


  <li>New demo "Textvariable". Demonstrates the new <span style="font-weight: bold;">-textvariable</span> option of the <span style="font-weight: bold;">text</span> element.</li>


  <li>Added a new Event Browser window to display events generated by
the main treectrl widget.</li>


  <li>The context menu can be popped up in all the demo lists. A
&lt;Control-ButtonPress-1&gt; binding for this was added under OSX/Aqua.</li>


  <li>In the "Explorer" demos, the file name is hidden while editing
the file name.</li>


</ul>


</body>
</html>
